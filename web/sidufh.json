{"data":{"post":{"__typename":"Post","id":"4fe78f68c1ce","readingTime":4.916037735849057,"creator":{"__typename":"User","id":"524f539d50ac","imageId":"1*qzg4k1dbmci1Z47Qm6BTsQ@2x.jpeg","username":"yashbatra11111","name":"Yash Batra","bio":"I'm a software developer in backend and I love to read and share technological content.","tippingLink":null,"viewerEdge":{"isUser":false,"isFollowing":false,"isBlocking":false,"isMuting":false},"socialStats":{"followingCount":7,"followerCount":2555},"newsletterV3":{"__typename":"NewsletterV3","id":"be5c23c66e9b","viewerEdge":{"id":"newsletterId:be5c23c66e9b-viewerId:lo_aff91fe61fbf","isSubscribed":false}},"isFollowing":null,"mediumMemberAt":1742547651338,"twitterScreenName":""},"collection":null,"isLocked":true,"firstPublishedAt":1748271770288,"latestPublishedVersion":"b2e7ab4afaf5","title":"Load Balancing 100,000 WebSocket Connections: HAProxy vs. Nginx vs. Custom","visibility":"LOCKED","postResponses":{"count":13},"clapCount":492,"viewerEdge":{"clapCount":0},"detectedLanguage":"en","mediumUrl":"https://medium.com/@yashbatra11111/load-balancing-100-000-websocket-connections-haproxy-vs-nginx-vs-custom-4fe78f68c1ce","updatedAt":1748276973990,"allowResponses":true,"isProxyPost":false,"isSeries":false,"previewImage":{"id":"1*Um2SJUZmr9updC57edf3Wg.png"},"inResponseToPostResult":null,"inResponseToMediaResource":null,"inResponseToEntityType":null,"canonicalUrl":"https://medium.com/@yashbatra11111/load-balancing-100-000-websocket-connections-haproxy-vs-nginx-vs-custom-4fe78f68c1ce","previewContent":{"subtitle":"What I learned after three sleepless nights scaling real-time chat for 100,000 concurrent users"},"pinnedByCreatorAt":0,"linkMetadataList":[],"highlights":[{"__typename":"Quote","id":"anon_81340cea4303","postId":"4fe78f68c1ce","userId":"anon","startOffset":0,"endOffset":58,"paragraphs":[{"__typename":"Paragraph","id":"anon_81340cea4303_quote_0","name":"2c60","href":null,"text":"Routes connections based on consistent hashing of user IDs","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"OLI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null}],"quoteType":null}],"responsesLocked":false,"tags":[{"__typename":"Tag","id":"nginx","normalizedTagSlug":"nginx","displayTitle":"Nginx","followerCount":917,"postCount":6212},{"__typename":"Tag","id":"haproxy","normalizedTagSlug":"haproxy","displayTitle":"Haproxy","followerCount":66,"postCount":531},{"__typename":"Tag","id":"load-balancing","normalizedTagSlug":"load-balancing","displayTitle":"Load Balancing","followerCount":145,"postCount":2138},{"__typename":"Tag","id":"programming","normalizedTagSlug":"programming","displayTitle":"Programming","followerCount":12574459,"postCount":385386},{"__typename":"Tag","id":"startup","normalizedTagSlug":"startup","displayTitle":"Startup","followerCount":5173265,"postCount":479768}],"content":{"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"76bf","startIndex":0,"textLayout":null,"imageLayout":null,"videoLayout":null,"backgroundImage":null,"backgroundVideo":null}],"paragraphs":[{"__typename":"Paragraph","id":"b2e7ab4afaf5_0","name":"ee34","href":null,"text":"Load Balancing 100,000 WebSocket Connections: HAProxy vs. Nginx vs. Custom","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_1","name":"5e10","href":null,"text":"What I learned after three sleepless nights scaling real-time chat for 100,000 concurrent users","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"EM","start":0,"end":95,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_2","name":"de42","href":null,"text":"The notification came at 2:47 AM. Our real-time chat application was buckling under the weight of 80,000 concurrent WebSocket connections, and users were experiencing dropped messages and connection timeouts. By morning, we needed to handle 100,000+ connections reliably. This is the story of how we solved it, and the hard-learned lessons about WebSocket load balancing at scale.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_3","name":"4240","href":null,"text":"","iframe":null,"layout":"INSET_CENTER","markups":[],"metadata":{"__typename":"ImageMetadata","id":"1*Um2SJUZmr9updC57edf3Wg.png","originalWidth":700,"originalHeight":550,"focusPercentX":null,"focusPercentY":null,"alt":null},"mixtapeMetadata":null,"type":"IMG","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_4","name":"febd","href":null,"text":"The Problem: When Simple Solutions Break Down","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_5","name":"3b07","href":null,"text":"Traditional HTTP load balancing seems straightforward — distribute requests across servers, and you’re done. WebSocket connections are different beasts entirely. They’re persistent, stateful, and sticky. When a user connects, they maintain that connection for the duration of their session, sometimes hours at a time.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_6","name":"c941","href":null,"text":"Our initial setup was embarrassingly simple: a single Node.js server handling all connections. It worked beautifully for our first 10,000 users. At 50,000, we started seeing memory pressure. At 80,000, the entire system became unstable.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_7","name":"216d","href":null,"text":"The wake-up call came when our biggest client — a financial trading platform — couldn’t get real-time price updates during market open. Every second of downtime translated to real money lost.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_8","name":"b734","href":null,"text":"Round One: HAProxy (The Old Reliable)","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_9","name":"3a3f","href":null,"text":"HAProxy felt like the obvious choice. It’s battle-tested, handles millions of connections daily across the internet, and has excellent WebSocket support. Our configuration was straightforward:","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_10","name":"7ff2","href":null,"text":"frontend websocket_frontend\n    bind *:80\n    default_backend websocket_servers\n\nbackend websocket_servers\n    balance source\n    server ws1 10.0.1.10:3000 check\n    server ws2 10.0.1.11:3000 check\n    server ws3 10.0.1.12:3000 check","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"PRE","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":{"lang":"sql","mode":"AUTO"}},{"__typename":"Paragraph","id":"b2e7ab4afaf5_11","name":"b659","href":null,"text":"The balance source directive ensures that connections from the same IP address always route to the same backend server—crucial for maintaining WebSocket session state.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"CODE","start":4,"end":18,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_12","name":"8693","href":null,"text":"The Results:","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":12,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_13","name":"1037","href":null,"text":"Successfully handled 100,000+ concurrent connections","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_14","name":"6b18","href":null,"text":"CPU usage remained below 15% on our load balancer","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_15","name":"fcb9","href":null,"text":"Memory footprint was surprisingly small (~2GB)","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_16","name":"bdf5","href":null,"text":"Connection establishment time: ~45ms average","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_17","name":"4cae","href":null,"text":"The Gotchas: HAProxy’s session persistence based on source IP became problematic when users connected from behind corporate NATs. We’d see thousands of connections funneled to a single backend server while others sat idle.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":12,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_18","name":"edf5","href":null,"text":"The solution required switching to cookie-based persistence and modifying our WebSocket handshake to include session tokens. This added complexity but distributed load more evenly.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_19","name":"b2c1","href":null,"text":"","iframe":null,"layout":"INSET_CENTER","markups":[],"metadata":{"__typename":"ImageMetadata","id":"1*DzOunwKYFAC9IZBq3Ndxag.jpeg","originalWidth":2398,"originalHeight":1408,"focusPercentX":null,"focusPercentY":null,"alt":null},"mixtapeMetadata":null,"type":"IMG","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_20","name":"94d2","href":null,"text":"Round Two: Nginx (The Swiss Army Knife)","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_21","name":"fc84","href":null,"text":"Nginx’s appeal was its versatility. We were already using it for HTTP traffic, and consolidating our load balancing seemed logical. The configuration required the stream module:","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"CODE","start":163,"end":169,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_22","name":"8b6d","href":null,"text":"stream {\n    upstream websocket_backend {\n        ip_hash;\n        server 10.0.1.10:3000;\n        server 10.0.1.11:3000;\n        server 10.0.1.12:3000;\n    }\n\n    server {\n        listen 80;\n        proxy_pass websocket_backend;\n        proxy_timeout 1s;\n        proxy_responses 1;\n    }\n}","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"PRE","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":{"lang":"css","mode":"AUTO"}},{"__typename":"Paragraph","id":"b2e7ab4afaf5_23","name":"a1ca","href":null,"text":"The Results:","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":12,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_24","name":"540d","href":null,"text":"Handled 100,000 connections with room to spare","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_25","name":"202a","href":null,"text":"Better integration with our existing infrastructure","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_26","name":"248b","href":null,"text":"Built-in health checking and failover","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_27","name":"b7a3","href":null,"text":"Connection establishment time: ~52ms average","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_28","name":"7b86","href":null,"text":"The Surprise: Nginx consumed significantly more memory than HAProxy for the same workload — about 40% more. This wasn’t documented anywhere we could find, but our monitoring made it clear. For every 10,000 concurrent connections, Nginx used approximately 800MB more RAM than HAProxy.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":13,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_29","name":"ec8a","href":null,"text":"The ip_hash directive provided better distribution than HAProxy's default source balancing, but we still encountered the corporate NAT problem.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"CODE","start":4,"end":11,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_30","name":"40ea","href":null,"text":"Round Three: Custom Solution (The Nuclear Option)","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_31","name":"ded0","href":null,"text":"After wrestling with session persistence issues in both HAProxy and Nginx, we decided to build our own WebSocket-aware load balancer. The idea was simple: instead of relying on IP-based routing, we’d implement application-layer routing based on user sessions.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_32","name":"1602","href":null,"text":"Using Go, we built a lightweight proxy that:","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_33","name":"7f20","href":null,"text":"Intercepts WebSocket handshakes","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"OLI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_34","name":"fdd8","href":null,"text":"Extracts user authentication tokens","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"OLI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_35","name":"2c60","href":null,"text":"Routes connections based on consistent hashing of user IDs","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"OLI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_36","name":"ba4b","href":null,"text":"Maintains a real-time map of user-to-server assignments","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"OLI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_37","name":"bf66","href":null,"text":"type ConnectionRouter struct {\n    servers []string\n    userMap sync.Map\n    hashRing *consistent.Map\n}\n\nfunc (cr *ConnectionRouter) RouteConnection(userID string) string {\n    return cr.hashRing.Get(userID)\n}","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"PRE","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":{"lang":"go","mode":"AUTO"}},{"__typename":"Paragraph","id":"b2e7ab4afaf5_38","name":"1c69","href":null,"text":"The Results:","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":12,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_39","name":"d0ba","href":null,"text":"Perfect load distribution — no more NAT problems","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_40","name":"5952","href":null,"text":"Connection establishment time: ~38ms average","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_41","name":"c2fa","href":null,"text":"Lowest memory usage of all three solutions","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_42","name":"0ca8","href":null,"text":"Built-in connection tracking and analytics","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"ULI","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_43","name":"11e5","href":null,"text":"The Cost: Development time was substantial — three weeks for the initial version, ongoing maintenance, and the responsibility of maintaining critical infrastructure. Every bug became our problem to solve.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":9,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_44","name":"23c4","href":null,"text":"Performance Comparison: The Numbers","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_45","name":"aa4e","href":null,"text":"After running identical workloads across all three solutions:","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_46","name":"28cb","href":null,"text":"","iframe":null,"layout":"INSET_CENTER","markups":[],"metadata":{"__typename":"ImageMetadata","id":"1*rrUL47dxbRlwCeM81jnAIQ.png","originalWidth":1332,"originalHeight":406,"focusPercentX":null,"focusPercentY":null,"alt":null},"mixtapeMetadata":null,"type":"IMG","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_47","name":"06ed","href":null,"text":"The Hidden Costs Nobody Talks About","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_48","name":"62d3","href":null,"text":"Beyond raw performance numbers, each solution carried different operational burdens:","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_49","name":"0ea9","href":null,"text":"HAProxy required deep understanding of its configuration syntax. Documentation is excellent, but the learning curve is steep. Debugging connection issues often meant diving into HAProxy logs and correlating them with application logs.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":7,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_50","name":"97cd","href":null,"text":"Nginx felt familiar but had subtle differences in WebSocket handling compared to HTTP. The stream module configuration is less documented than the HTTP module, leading to trial-and-error debugging sessions.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":5,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_51","name":"6a0a","href":null,"text":"Custom solution gave us complete control but made us responsible for edge cases we hadn’t considered. Handling connection timeouts, server failures, and graceful shutdowns required careful thought and testing.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":15,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_52","name":"9354","href":null,"text":"Real-World Lessons","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_53","name":"5605","href":null,"text":"Three months later, here’s what actually mattered in production:","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_54","name":"25f9","href":null,"text":"Monitoring is everything. Regardless of which load balancer you choose, you need visibility into connection counts, distribution, and health checks. We built custom dashboards showing real-time connection maps and server load.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":25,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_55","name":"26b5","href":null,"text":"Plan for failure. All three solutions handle server failures, but they behave differently. HAProxy and Nginx immediately redirect new connections but may drop existing ones. Our custom solution could gracefully migrate connections, but this required additional complexity.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":17,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_56","name":"9ddc","href":null,"text":"Network topology matters more than you think. Corporate firewalls, NAT configurations, and proxy servers all affect WebSocket connections differently than HTTP requests. Test with real user networks, not just your development environment.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":0,"end":45,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_57","name":"e16f","href":null,"text":"The Recommendation","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_58","name":"f506","href":null,"text":"For most teams facing this challenge, start with HAProxy. It’s the most proven solution for high-connection-count scenarios, has excellent documentation, and a large community. The configuration complexity is worth the reliability.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"STRONG","start":38,"end":56,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_59","name":"dd84","href":null,"text":"Consider Nginx if you’re already heavily invested in the Nginx ecosystem and can accept the higher memory usage. The operational simplicity of managing one load balancer type might outweigh the resource costs.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_60","name":"74a5","href":null,"text":"Build a custom solution only if you have specific requirements that neither HAProxy nor Nginx can meet, a strong development team, and the resources to maintain custom infrastructure. The performance gains are real, but they come at a significant operational cost.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_61","name":"368a","href":null,"text":"Six Months Later","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"H3","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_62","name":"7eed","href":null,"text":"Our HAProxy solution has been running in production for six months, handling peak loads of 180,000 concurrent connections during major market events. The 2:47 AM alerts have stopped, and our trading platform client renewed their contract.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_63","name":"90b2","href":null,"text":"Sometimes the boring, proven solution is the right choice. But understanding the alternatives — and their trade-offs — made us better engineers and helped us make an informed decision rather than just following tutorials.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_64","name":"329a","href":null,"text":"The next time you’re facing a similar scaling challenge, remember that the best solution isn’t always the most technically impressive one. It’s the one your team can implement, monitor, and maintain reliably in production.","iframe":null,"layout":null,"markups":[],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null},{"__typename":"Paragraph","id":"b2e7ab4afaf5_65","name":"cc5f","href":null,"text":"If you’re dealing with WebSocket scaling challenges, I’d love to hear about your experiences. The real-world performance characteristics often differ significantly from theoretical benchmarks, and sharing these stories helps the entire community build better systems.","iframe":null,"layout":null,"markups":[{"__typename":"Markup","name":null,"type":"EM","start":0,"end":267,"href":null,"title":null,"rel":null,"anchorType":null,"userId":null,"creatorIds":null}],"metadata":null,"mixtapeMetadata":null,"type":"P","hasDropCap":null,"dropCapImage":null,"codeBlockMetadata":null}]},"validatedShareKey":""}},"meterPost":{"__typename":"MeteringInfo","maxUnlockCount":null,"unlocksRemaining":null,"postIds":[]}}}
